// Auto-generated by the postman-to-k6 converter

import "./libs/shim/core.js";
import "./libs/shim/expect.js";
import "./libs/shim/urijs.js";

export let options = { maxRedirects: 4 };

const Request = Symbol.for("request");
postman[Symbol.for("initial")]({
  options,
  environment: {
    BaseURL: "qa3.nslhub.com",
    IamURL: "https://qaiam.nslhub.com",
    SuperAdminTenant: "Super-Admin",
    TenantName: "apiqa0504",
    TenantAdmin: "admin@nslhub.com",
    AdminPassword: "admin",
    CCORoleId: 1841833683818,
    RoleCCO: "CCO",
    UserCCOManager: "userccomanager",
    UserCCO: "usercco",
    UserCCOId: 322589991331,
    UserCCO1: "usercco1",
    UserCCO1Id: 1972120016659,
    CCHRoleId: 234529237640,
    RoleCCH: "CCH",
    UserCCH: "usercch",
    RoleCCA: "CCA",
    UserCCA: "usercca",
    Password: "test",
    BearerToken: "undefined token",
    TenantName2: "apiqaei0504",
    TenantAdmin2: "admin@nslhub.com",
    AdminPassword2: "admin",
    DsdFileStoreURL: "https://ava-nlg-dev.nslhub.com",
    RefreshToken: null,
    WaitTime: 30000,
    NUMBER: "",
    COUNT: "",
    UserCCOEmailId: "usercco@nslhub.com",
    UserCCO1EmailId: "usercco1@nslhub.com",
    UserCCOManagerEmailId: "userccomanager@nslhub.com",
    UserCCAId: 2044956951239,
    UserCCA1Id: 2043386291967,
    UserCCA1: "usercca1",
    CCARoleId: 368848764661,
    UserCCOManagerId: 2119243203126,
    UserCCH1: "usercch1",
    OuCCO: "oucco",
    OuCCOId: "191876919025",
    UserOuCCO: "useroucco",
    UserOuCCO1: "useroucco1",
    UserOuCCOId: 1657502426387,
    UserOuCCOId1: 668079088379,
    GN: "",
    SolutionPublisher: "SolutionPublisher",
    SolutionPublisherId: 824925532392,
    TenantNameStage: "apiqa0504stage",
    TenantNameProd: "apiqa0504prod",
    TenantNameStageClientId: "apiqa0504_staging",
    UserCCHId: 398151345508,
    TraceAuditRole: "auditdata",
    TraceAuditRoleId: 1873250222640,
    AuditDesigner: "auditdesigner",
    AuditDesignerId: 1139785560613,
    AuditReviewer: "auditreviewer",
    AuditReviewerId: 996441711937,
    AuditDesignerEmailId: "auditdesigner@nslhub.com",
    SuperAdminUserName: "platformadmin@nslhub.com",
    SuperAdminPassword: "padmin@123",
    SaasTenantName: "apiqasaas0802",
    SaasUserCCO: "usercco",
    SaasUserCCOId: "1173118793932",
    SaasTenantId: 28606,
    SuperAdminUserId: "-827185515",
    SuperAdminUser: "platformadmin",
    SaasRoleCCO: "CCO",
    SaasTenantAdmin: "admin@nslhub.com",
    SaasUserCCH: "usercch",
    SaasUserCCHId: "933373429905",
    SaasRoleCCH: "CCH",
    SaasUserCCA: "usercca",
    SaasUserCCAId: "1588750292491",
    SaasRoleCCA: "CCA",
    RoleManager: "Manager",
    ManagerRoleId: 829265664407,
    RoleEmployee: "Employee",
    EmployeeRoleId: 2040409113899,
    RoleFinance: "Finance",
    FinanceRoleId: 1764637492961,
    TenantAdminId: 894878720178,
    Tenant2AdminId: 1597011094011,
    T2UserCCOId: 1386113498793,
    T2CCORoleId: 239407227356,
    EmployeeUser: "employeeuser",
    EmployeeUserId: 1917645633263,
    FinanceUser: "financeuser",
    FinanceUserId: 820077520635,
    FinanceUser1: "financeuser1",
    FinanceUserId1: "1192769182955",
    EmployeeUser1: "employeeuser1",
    EmployeeUserId1: "1228497924811",
    ManagerUser: "manageruser",
    ManagerUserId: 1732001198107,
    ManagerUser1: "manageruser1",
    ManagerUserId1: "897141596215",
    UserCCHEmailId: "usercch@nslhub.com",
    UserCCAEmailId: "usercca@nslhub.com",
    UserCCA1EmailId: "usercca1@nslhub.com",
    UserCCH1EmailId: "usercch1@nslhub.com",
    UserCCH1Id: 632745185759,
    SAASAdminUserId: "242233047416",
    SaasUserCCO1Id: "464692553728",
    SaasUserCCOManagerId: "202094916017",
    ManagerUser1Id: 1989195344420,
    FinanceUser1Id: 1829479253660,
    EmployeeUser1Id: 1178159858335,
    T2UserCCO1Id: 878542497800,
    StageAdmin: "stageadmin@nslhub.com",
    UserCCC: "userccc",
    UserCCC1: "userccc1",
    UserCCCManager: "usercccmanager",
    RoleSolutionCustomizer: "SolutionCustomizer",
    UserCCCId: "668849564311",
    UserCCC1Id: "1607519294012",
    SolutionCustomizerRoleId: "639989182448",
    T3UserCCO1Id: 405650278408,
    Tenant3AdminId: 982435399574,
    T3UserCCOId: 1424682699760,
    T3CCORoleId: 129071126100,
    TenantName3: "apiqa3ten0604"
  }
});

export default function() {
  postman[Request]({
    name: "Generate Token (usercco) and Test Data",
    id: "013f2569-956f-464d-9858-92486a7de34e",
    method: "POST",
    address:
      "{{IamURL}}/auth/realms/{{TenantName}}/protocol/openid-connect/token",
    data: {
      client_id: "{{TenantName}}",
      grant_type: "password",
      password: "{{Password}}",
      username: "{{UserCCO}}"
    },
    headers: {
      Accept: "application/json, text/plain, */*",
      "Content-Type": "application/x-www-form-urlencoded",
      "Accept-Language": "en"
    },
    pre() {
      // pm.variables.clear();

      pm.environment.set(
        "RandomNumber",
        new Date()
          .toISOString()
          .replace(/[^0-9]/g, "")
          .slice(0, -3) +
          "" +
          Math.floor(Math.random() * 100000 + 1)
      );

      // Solution Development

      pm.environment.set(
        "SolutionName",
        "BasicSolution" + pm.environment.get("RandomNumber")
      );
      pm.environment.set("CCORoleId", pm.environment.get("CCORoleId"));
      pm.environment.set("RoleCCO", pm.environment.get("RoleCCO"));

      pm.environment.set(
        "CuName1",
        "Student Details " + pm.environment.get("RandomNumber")
      );
      pm.environment.set(
        "EntityName1",
        "student" + pm.environment.get("RandomNumber")
      );
      pm.environment.set("AttributeName11", "Full Name");
      pm.environment.set("AttributeName12", "Age");

      pm.environment.set(
        "CuName2",
        "Address " + pm.environment.get("RandomNumber")
      );
      pm.environment.set(
        "EntityName2",
        "contact" + pm.environment.get("RandomNumber")
      );
      pm.environment.set("AttributeName21", "Address");
      pm.environment.set("AttributeName22", "Pin Code");

      // Solution Execution

      pm.environment.set(
        "AttributeValue11",
        "John " + pm.environment.get("RandomNumber")
      );
      pm.environment.set("AttributeValue12", pm.environment.get("RandomNumber"));

      pm.environment.set(
        "AttributeValue21",
        "California " + pm.environment.get("RandomNumber")
      );
      pm.environment.set("AttributeValue22", pm.environment.get("RandomNumber"));
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
      });

      pm.environment.set(
        "BearerToken",
        pm.response.json().token_type + " " + pm.response.json().access_token
      );
      pm.environment.set("RefreshToken", pm.response.json().refresh_token);
    }
  });

  postman[Request]({
    name: "Create first Entity",
    id: "7827da1f-ab9b-4fa6-a143-886f776410cd",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/Entity",
    data:
      '{\r\n\t"nslAttributes": [\r\n\t\t{\r\n\t\t\t"name": "{{AttributeName11}}",\r\n\t\t\t"isReserved": false,\r\n\t\t\t"constraints": [],\r\n\t\t\t"attributeClassification": "ESSENTIAL",\r\n\t\t\t"attributeType": {\r\n\t\t\t\t"type": "string",\r\n\t\t\t\t"properties": {\r\n\t\t\t\t\t"sourceValues": "[]"\r\n\t\t\t\t},\r\n\t\t\t\t"uiElement": "text"\r\n\t\t\t},\r\n\t\t\t"id": null\r\n\t\t},\r\n\t\t{\r\n\t\t\t"defaultValue": null,\r\n\t\t\t"name": "{{AttributeName12}}",\r\n\t\t\t"isReserved": false,\r\n\t\t\t"constraints": [],\r\n\t\t\t"attributeClassification": "ESSENTIAL",\r\n\t\t\t"attributeType": {\r\n\t\t\t\t"type": "number",\r\n\t\t\t\t"properties": {\r\n\t\t\t\t\t"sourceValues": "[]"\r\n\t\t\t\t},\r\n\t\t\t\t"uiElement": "number"\r\n\t\t\t},\r\n\t\t\t"id": null\r\n\t\t}\r\n\t],\r\n\t"entityClassification": "",\r\n\t"name": "{{EntityName1}}",\r\n\t"isMultiValue": false\r\n}',
    headers: {
      "accept-language": "en",
      Authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function () {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          pm.environment.get("EntityName1") + " is successfully saved"
        );
      });

      pm.environment.set("EntityId1", pm.response.json().result.id);
      pm.environment.set(
        "AttributeId11",
        pm.response.json().result.nslAttributes[0].id
      );
      pm.environment.set(
        "AttributeId12",
        pm.response.json().result.nslAttributes[1].id
      );
    }
  });

  postman[Request]({
    name: "Add Attributes to First Entity",
    id: "4a14b736-92d8-4048-98a4-59731aba0817",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/core/UIAttribute",
    data:
      '{\r\n\t"cuId": null,\r\n\t"cuType": null,\r\n\t"tuples": [],\r\n\t"entityList": [\r\n\t\t{\r\n\t\t\t"entityId": {{EntityId1}},\r\n\t\t\t"tuples": [],\r\n\t\t\t"attributeList": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"attributeId": {{AttributeId11}},\r\n\t\t\t\t\t"tuples": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t"key": "uiControl",\r\n\t\t\t\t\t\t\t"value": "text"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t"attributeId": {{AttributeId12}},\r\n\t\t\t\t\t"tuples": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t"key": "uiControl",\r\n\t\t\t\t\t\t\t"value": "number"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "Successfully saved the UIAttribute "
        );
      });
    }
  });

  postman[Request]({
    name: "Create first CU",
    id: "59c94124-657b-4706-b49a-9936abef48b1",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/CU",
    data:
      '{\r\n\t"name": "{{CuName1}}",\r\n\t"agents": [\r\n\t\t{\r\n\t\t\t"agentType": "human"\r\n\t\t}\r\n\t],\r\n\t"cuType": "BASIC",\r\n\t"layers": [\r\n\t\t{\r\n\t\t\t"type": "physical",\r\n\t\t\t"label": "physical",\r\n\t\t\t"participatingItems": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"item": {\r\n\t\t\t\t\t\t"TYPE": "GeneralEntity",\r\n\t\t\t\t\t\t"DATA": {\r\n\t\t\t\t\t\t\t"name": "{{EntityName1}}",\r\n\t\t\t\t\t\t\t"nslAttributes": [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t"name": "{{AttributeName11}}",\r\n\t\t\t\t\t\t\t\t\t"attributeType": {\r\n\t\t\t\t\t\t\t\t\t\t"type": "string",\r\n\t\t\t\t\t\t\t\t\t\t"nestedNslDataTypeProperties": {},\r\n\t\t\t\t\t\t\t\t\t\t"properties": {\r\n\t\t\t\t\t\t\t\t\t\t\t"sourceValues": "[]"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t"constraints": [],\r\n\t\t\t\t\t\t\t\t\t"attributeClassification": "ESSENTIAL",\r\n\t\t\t\t\t\t\t\t\t"isReserved": false,\r\n\t\t\t\t\t\t\t\t\t"id": {{AttributeId11}},\r\n\t\t\t\t\t\t\t\t\t"uiElement": {\r\n\t\t\t\t\t\t\t\t\t\t"dataType": "string",\r\n\t\t\t\t\t\t\t\t\t\t"name": "Text",\r\n\t\t\t\t\t\t\t\t\t\t"uiElement": "text",\r\n\t\t\t\t\t\t\t\t\t\t"isMulti": false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t"name": "{{AttributeName12}}",\r\n\t\t\t\t\t\t\t\t\t"attributeType": {\r\n\t\t\t\t\t\t\t\t\t\t"type": "number",\r\n\t\t\t\t\t\t\t\t\t\t"nestedNslDataTypeProperties": {},\r\n\t\t\t\t\t\t\t\t\t\t"properties": {\r\n\t\t\t\t\t\t\t\t\t\t\t"sourceValues": "[]"\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t"constraints": [],\r\n\t\t\t\t\t\t\t\t\t"attributeClassification": "ESSENTIAL",\r\n\t\t\t\t\t\t\t\t\t"isReserved": false,\r\n\t\t\t\t\t\t\t\t\t"id": {{AttributeId12}},\r\n\t\t\t\t\t\t\t\t\t"uiElement": {\r\n\t\t\t\t\t\t\t\t\t\t"dataType": "number",\r\n\t\t\t\t\t\t\t\t\t\t"name": "Number",\r\n\t\t\t\t\t\t\t\t\t\t"uiElement": "number",\r\n\t\t\t\t\t\t\t\t\t\t"isMulti": false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t"isReserved": false,\r\n\t\t\t\t\t\t\t"id": {{EntityId1}}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t],\r\n\t"designTimeRights": [\r\n\t\t{\r\n\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t"informationRight": true,\r\n\t\t\t"decisionRight": true\r\n\t\t}\r\n\t],\r\n\t"txnTimeRights": [\r\n\t\t{\r\n\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t"informationRight": true,\r\n\t\t\t"decisionRight": false,\r\n\t\t\t"executionRight": true\r\n\t\t}\r\n\t],\r\n\t"id": null,\r\n\t"draftedCu": false,\r\n\t"nextTriggerSet": [],\r\n\t"dcd": [],\r\n\t"mindCUList": [],\r\n\t"exceptionCUList": [],\r\n\t"isAlternate": false,\r\n\t"index": 1,\r\n\t"activeCuIndex": true,\r\n\t"entitySaved": true,\r\n\t"createdEntityId": {{EntityId1}},\r\n\t"displayName": "{{CuName1}}",\r\n\t"description": "Change Unit Description"\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "CU has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
      });
      pm.environment.set("CuId1", pm.response.json().result.id);
      pm.environment.set(
        "ItemId1",
        pm.response.json().result.layers[0].participatingItems[0].id
      );
      pm.environment.set(
        "ParticipatingItemId1",
        pm.response.json().result.layers[0].id
      );
    }
  });

  postman[Request]({
    name: "Create GSI-Draft",
    id: "2bb0037f-dd2c-41ab-9ee9-99382ff008c0",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/core/GSI-Draft",
    data:
      '{\n    "name": "{{SolutionName}}",\n    "displayName": "{{SolutionName}}",\n    "cuType": "GSI",\n    "agents": [\n        {\n            "agentType": "human"\n        }\n    ],\n    "subOrdinateCUList": [],\n    "superOrdinateCUList": [],\n    "layers": null,\n    "solutionLogic": [\n        {\n    "referencedChangeUnit": {{CuId1}},\n\t\t\t"id": null,\n\t\t\t"draftedCu": false,\n\t\t\t"name": "{{CuName1}}",\n\t\t\t"nextTriggerSet": [],\n\t\t\t"dcd": [],\n\t\t\t"mindCUList": [],\n\t\t\t"exceptionCUList": [],\n\t\t\t"cuType": "BASIC",\n\t\t\t"index": 1,\n            "designTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": true,\n                    "executionRight": false,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "txnTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": false,\n                    "executionRight": true,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "visited": true\n        }\n    ],\n    "designTimeRights": [\n        {\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderName": "{{RoleCCO}}",\n            "name": "{{RoleCCO}}",\n            "informationRight": true,\n            "decisionRight": true,\n            "rightHolderType": "ROLE"\n        }\n    ],\n    "txnTimeRights": [\n        {\n            "executionRight": true,\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderName": "{{RoleCCO}}",\n            "name": "{{RoleCCO}}",\n            "informationRight": true,\n            "decisionRight": false,\n            "rightHolderType": "ROLE"\n        }\n    ],\n    "id": null\n}',
    headers: {
      "Accept-Language": "en",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      Accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
      });
      pm.environment.set("SolutionId1", pm.response.json().result.id);
      pm.environment.set(
        "LayerId1",
        pm.response.json().result.solutionLogic[0].id
      );
    }
  });

  postman[Request]({
    name: "Save GSI",
    id: "77004cec-aa09-48f6-9b65-a0c9db458580",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/GSI",
    data:
      '{\r\n    "name": "{{SolutionName}}",\r\n    "displayName": "{{SolutionName}}",\r\n    "cuType": "GSI",\r\n    "agents": [\r\n        {\r\n            "agentType": "human"\r\n        }\r\n    ],\r\n    "subOrdinateCUList": [],\r\n    "superOrdinateCUList": [],\r\n    "layers": null,\r\n    "solutionLogic": [\r\n        {\r\n            "index": 1,\r\n            "nextTriggerSet": [],\r\n            "referencedChangeUnit": {{CuId1}},\r\n            "dcd": [],\r\n            "exceptionCUList": [],\r\n            "eventCUList": [],\r\n            "mindCUList": [],\r\n            "entityDesignRights": {},\r\n            "entityTransactionRights": {},\r\n            "attributeDesignRights": {},\r\n            "attributeTransactionRights": {},\r\n            "cuType": "BASIC",\r\n            "specialFeatureProperties": {},\r\n            "slotItemData": {},\r\n            "name": "{{CuName1}}",\r\n            "displayName": "{{CuName1}}",\r\n            "description": "Change Unit Description",\r\n            "agents": [\r\n                {\r\n                    "agentType": "human"\r\n                }\r\n            ],\r\n            "superOrdinateCUList": [],\r\n            "membershipList": [],\r\n            "status": "DRAFT",\r\n            "propertiesMap": {\r\n                "specialFeatures": [],\r\n                "defaultValues": []\r\n            },\r\n            "cuSystemProperties": {},\r\n            "id": {{LayerId1}},\r\n            "designTimeRights": [\r\n                {\r\n                    "informationRight": true,\r\n                    "decisionRight": true,\r\n                    "executionRight": false,\r\n                    "rightHolderId": {{CCORoleId}},\r\n                    "rightHolderType": "ROLE",\r\n                    "rightHolderName": "{{RoleCCO}}",\r\n                    "disableParentRoleAccess": false\r\n                }\r\n            ],\r\n            "txnTimeRights": [\r\n                {\r\n                    "informationRight": true,\r\n                    "decisionRight": false,\r\n                    "executionRight": true,\r\n                    "rightHolderId": {{CCORoleId}},\r\n                    "rightHolderType": "ROLE",\r\n                    "rightHolderName": "{{RoleCCO}}",\r\n                    "disableParentRoleAccess": false\r\n                }\r\n            ],\r\n            "visited": true\r\n        }\r\n    ],\r\n    "designTimeRights": [\r\n        {\r\n            "rightHolderId": {{CCORoleId}},\r\n            "rightHolderName": "{{RoleCCO}}",\r\n            "name": "{{RoleCCO}}",\r\n            "informationRight": true,\r\n            "decisionRight": true,\r\n            "rightHolderType": "ROLE"\r\n        }\r\n    ],\r\n    "txnTimeRights": [\r\n        {\r\n            "executionRight": true,\r\n            "rightHolderId": {{CCORoleId}},\r\n            "rightHolderName": "{{RoleCCO}}",\r\n            "name": "{{RoleCCO}}",\r\n            "informationRight": true,\r\n            "decisionRight": false,\r\n            "rightHolderType": "ROLE"\r\n        }\r\n    ],\r\n    "id": {{SolutionId1}},\r\n    "status": "DRAFT",\r\n    "version": "1.0",\r\n    "masterId": {{SolutionId1}}\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
      });
    }
  });

  postman[Request]({
    name: "Finish GSI",
    id: "0782484e-6745-4c4c-b950-c1b7c3ae15be",
    method: "POST",
    address:
      "https://{{TenantName}}.{{BaseURL}}/solution-versioning/api/version/finish",
    data:
      '{\n  "constrainedToReportingTree": false,\n  "constrainedToTeam": false,\n  "rights": [\n    "TXN_INFO_RIGHTS",\n    "SOLUTIONS_DECISION_RIGHTS",\n    "EXECUTION_RIGHTS"\n  ],\n  "nextTriggerSet": [],\n  "dcd": [],\n  "exceptionCUList": [],\n  "eventCUList": [],\n  "mindCUList": [],\n  "entityDesignRights": {},\n  "entityTransactionRights": {},\n  "attributeDesignRights": {},\n  "attributeTransactionRights": {},\n  "cuType": "BASIC",\n  "specialFeatureProperties": {},\n  "slotItemData": {},\n  "name": "{{SolutionName}}",\n  "displayName": "{{SolutionName}}",\n  "agents": [\n    {\n      "agentType": "human"\n    }\n  ],\n  "superOrdinateCUList": [],\n  "membershipList": [],\n  "isReserved": false,\n  "status": "DRAFT",\n  "propertiesMap": {},\n  "cuSystemProperties": {},\n  "id": {{SolutionId1}},\n  "designTimeRights": [\n    {\n      "informationRight": true,\n      "decisionRight": true,\n      "executionRight": false,\n      "rightHolderId": {{CCORoleId}},\n      "rightHolderType": "ROLE",\n      "rightHolderName": "{{RoleCCO}}",\n      "disableParentRoleAccess": false\n    }\n  ],\n  "txnTimeRights": [\n    {\n      "informationRight": true,\n      "decisionRight": false,\n      "executionRight": true,\n      "rightHolderId": {{CCORoleId}},\n      "rightHolderType": "ROLE",\n      "rightHolderName": "{{RoleCCO}}",\n      "disableParentRoleAccess": false\n    }\n  ],\n  "masterId": {{SolutionId1}}\n}',
    headers: {
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI " +
            pm.environment.get("SolutionName") +
            " GSI Unit Id :" +
            pm.environment.get("SolutionId1") +
            " is successfully finished"
        );
        pm.expect(pm.response.json().result.status).to.eq("READY");
      });
    }
  });

  postman[Request]({
    name: "Send Notification for approval",
    id: "804bf668-db1c-458f-89c7-03b5ae9a38e0",
    method: "POST",
    address:
      "https://{{TenantName}}.{{BaseURL}}/dsd-orch/v1/notifications/api/notification/send",
    data:
      '{\n  "actionableContent": {\n    "target_type": "Gsi",\n    "target_id": {{SolutionId1}},\n    "target_name": "{{SolutionName}}",\n    "context_cu": "",\n    "context_gsi": "",\n    "approvals": "true"\n  },\n  "title": "Review gsi",\n  "targetUserId": [\n    "{{UserCCO1}}@nslhub.com"\n  ],\n  "notificationChannels": [\n    "PUSH"\n  ],\n  "content": ""\n}',
    headers: {
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "Notification sent successfully"
        );
      });
    }
  });

  postman[Request]({
    name: "Edit GSI",
    id: "bc017888-ca0a-41dd-a418-191bd6ed54e8",
    method: "POST",
    address:
      "https://qa3apitesting0305.qa3.nslhub.com/solution-versioning/api/version/edit/{{SolutionId1}}",
    data: "{}",
    headers: {
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.environment.set("SolutionId2", pm.response.json().result.id);
      pm.environment.set(
        "LayerId21",
        pm.response.json().result.solutionLogic[0].DATA.id
      );

      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI " +
            pm.environment.get("SolutionName") +
            " GSI Unit Id :" +
            pm.environment.get("SolutionId2") +
            " is successfully edited"
        );
      });
    }
  });

  postman[Request]({
    name: "Create second Entity",
    id: "37216b96-0e8a-4197-a58c-832fe9ccf568",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/Entity",
    data:
      '{\r\n    "entityClassification": "",\r\n    "isMultiValue": false,\r\n    "name": "{{EntityName2}}",\r\n    "nslAttributes": [\r\n        {\r\n            "name": "{{AttributeName21}}",\r\n            "isReserved": false,\r\n            "constraints": [],\r\n            "attributeClassification": "ESSENTIAL",\r\n            "attributeType": {\r\n                "type": "string",\r\n                "properties": {},\r\n                "extendedProperties": {\r\n                    "sourceValues": []\r\n                },\r\n                "uiElement": "text"\r\n            },\r\n            "id": null\r\n        },\r\n        {\r\n            "defaultValue": null,\r\n            "name": "{{AttributeName22}}",\r\n            "isReserved": false,\r\n            "constraints": [],\r\n            "attributeClassification": "ESSENTIAL",\r\n            "attributeType": {\r\n                "type": "number",\r\n                "properties": {},\r\n                "extendedProperties": {\r\n                    "sourceValues": []\r\n                },\r\n                "uiElement": "number"\r\n            },\r\n            "id": null\r\n        }\r\n    ],\r\n    "ontology": [\r\n        {\r\n            "id": "common"\r\n        }\r\n    ]\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          pm.environment.get("EntityName2") + " is successfully saved"
        );
      });

      pm.environment.set("EntityId2", pm.response.json().result.id);
      pm.environment.set(
        "AttributeId21",
        pm.response.json().result.nslAttributes[0].id
      );
      pm.environment.set(
        "AttributeId22",
        pm.response.json().result.nslAttributes[1].id
      );
    }
  });

  postman[Request]({
    name: "Add Attributes to Second Entity",
    id: "068d1d8b-4509-42f2-ab9b-141f34b4f876",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/core/UIAttribute",
    data:
      '{\r\n    "cuId": null,\r\n    "cuType": null,\r\n    "tuples": [],\r\n    "entityList": [\r\n        {\r\n            "entityId": {{EntityId2}},\r\n            "tuples": [],\r\n            "attributeList": [\r\n                {\r\n                    "attributeId": {{AttributeId21}},\r\n                    "tuples": [\r\n                        {\r\n                            "key": "uiControl",\r\n                            "value": "text"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    "attributeId": {{AttributeId22}},\r\n                    "tuples": [\r\n                        {\r\n                            "key": "uiControl",\r\n                            "value": "number"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "Successfully saved the UIAttribute "
        );
      });
    }
  });

  postman[Request]({
    name: "Create second CU",
    id: "09488b79-626f-4569-ae49-6b99d512a75b",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/CU",
    data:
      '{\r\n    "name": "{{CuName2}}",\r\n    "agents": [\r\n        {\r\n            "agentType": "human"\r\n        }\r\n    ],\r\n    "cuType": "BASIC",\r\n    "layers": [\r\n        {\r\n            "type": "physical",\r\n            "label": "physical",\r\n            "participatingItems": [\r\n                {\r\n                    "item": {\r\n                        "TYPE": "GeneralEntity",\r\n                        "DATA": {\r\n                            "name": "{{EntityName2}}",\r\n                            "nslAttributes": [\r\n                                {\r\n                                    "name": "{{AttributeName21}}",\r\n                                    "attributeType": {\r\n                                        "type": "string",\r\n                                        "nestedNslDataTypeProperties": {},\r\n                                        "properties": {\r\n                                            "sourceValues": "[]"\r\n                                        }\r\n                                    },\r\n                                    "constraints": [],\r\n                                    "attributeClassification": "ESSENTIAL",\r\n                                    "isReserved": false,\r\n                                    "id": {{AttributeId21}},\r\n                                    "uiElement": {\r\n                                        "dataType": "string",\r\n                                        "name": "Text",\r\n                                        "uiElement": "text",\r\n                                        "isMulti": false\r\n                                    }\r\n                                },\r\n                                {\r\n                                    "name": "{{AttributeName22}}",\r\n                                    "attributeType": {\r\n                                        "type": "number",\r\n                                        "nestedNslDataTypeProperties": {},\r\n                                        "properties": {\r\n                                            "sourceValues": "[]"\r\n                                        }\r\n                                    },\r\n                                    "constraints": [],\r\n                                    "attributeClassification": "ESSENTIAL",\r\n                                    "isReserved": false,\r\n                                    "id": {{AttributeId22}},\r\n                                    "uiElement": {\r\n                                        "dataType": "number",\r\n                                        "name": "Number",\r\n                                        "uiElement": "number",\r\n                                        "isMulti": false\r\n                                    }\r\n                                }\r\n                            ],\r\n                            "isReserved": false,\r\n                            "id": {{EntityId2}}\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ],\r\n    "designTimeRights": [\r\n        {\r\n            "rightHolderId": {{CCORoleId}},\r\n            "name": "{{RoleCCO}}",\r\n            "rightHolderType": "ROLE",\r\n            "informationRight": true,\r\n            "decisionRight": true\r\n        }\r\n    ],\r\n    "txnTimeRights": [\r\n        {\r\n            "rightHolderId": {{CCORoleId}},\r\n            "name": "{{RoleCCO}}",\r\n            "rightHolderType": "ROLE",\r\n            "informationRight": true,\r\n            "decisionRight": false,\r\n            "executionRight": true\r\n        }\r\n    ],\r\n    "id": null,\r\n    "draftedCu": false,\r\n    "nextTriggerSet": [],\r\n    "dcd": [],\r\n    "mindCUList": [],\r\n    "exceptionCUList": [],\r\n    "isAlternate": false,\r\n    "index": 2,\r\n    "activeCuIndex": true,\r\n    "entitySaved": true,\r\n    "createdEntityId": {{EntityId2}},\r\n    "displayName": "{{CuName2}}",\r\n    "description": "Change Unit Description"\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "CU has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
      });
      pm.environment.set("CuId2", pm.response.json().result.id);
      pm.environment.set(
        "ItemId2",
        pm.response.json().result.layers[0].participatingItems[0].id
      );
      pm.environment.set(
        "ParticipatingItemId2",
        pm.response.json().result.layers[0].id
      );
    }
  });

  postman[Request]({
    name: "Create GSI-Draft",
    id: "2b3a1c08-6c39-4856-a595-be6d29a47723",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/core/GSI-Draft",
    data:
      '{\r\n\t"name": "{{SolutionName}}",\r\n\t"displayName": "{{SolutionName}}",\r\n\t"cuType": "GSI",\r\n\t"agents": [\r\n\t\t{\r\n\t\t\t"agentType": "human"\r\n\t\t}\r\n\t],\r\n\t"subOrdinateCUList": [],\r\n\t"superOrdinateCUList": [],\r\n\t"solutionLogic": [\r\n\t\t{\r\n\t\t\t"referencedChangeUnit": {{CuId1}},\r\n\t\t\t"id": {{LayerId21}},\r\n\t\t\t"draftedCu": false,\r\n\t\t\t"name": "{{CuName1}}",\r\n\t\t\t"nextTriggerSet": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"nextCUName": "{{CuName2}}",\r\n\t\t\t\t\t"index": 2\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t"dcd": [],\r\n\t\t\t"mindCUList": [],\r\n\t\t\t"exceptionCUList": [],\r\n\t\t\t"cuType": "BASIC",\r\n\t\t\t"index": 1,\r\n\t\t\t"designTimeRights": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"informationRight": true,\r\n\t\t\t\t\t"decisionRight": true,\r\n\t\t\t\t\t"executionRight": false,\r\n\t\t\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t\t\t"rightHolderName": "{{RoleCCO}}",\r\n\t\t\t\t\t"disableParentRoleAccess": false,\r\n\t\t\t\t\t"name": "{{RoleCCO}}"\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t"txnTimeRights": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"informationRight": true,\r\n\t\t\t\t\t"decisionRight": false,\r\n\t\t\t\t\t"executionRight": true,\r\n\t\t\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t\t\t"rightHolderName": "{{RoleCCO}}",\r\n\t\t\t\t\t"disableParentRoleAccess": false,\r\n\t\t\t\t\t"name": "{{RoleCCO}}"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\t"referencedChangeUnit": {{CuId2}},\r\n\t\t\t"draftedCu": false,\r\n\t\t\t"name": "{{CuName2}}",\r\n\t\t\t"nextTriggerSet": [],\r\n\t\t\t"dcd": [],\r\n\t\t\t"mindCUList": [],\r\n\t\t\t"exceptionCUList": [],\r\n\t\t\t"cuType": "BASIC",\r\n\t\t\t"index": 2,\r\n\t\t\t"designTimeRights": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t\t\t"informationRight": true,\r\n\t\t\t\t\t"decisionRight": true\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t"txnTimeRights": [\r\n\t\t\t\t{\r\n\t\t\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t\t\t"informationRight": true,\r\n\t\t\t\t\t"decisionRight": false,\r\n\t\t\t\t\t"executionRight": true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t],\r\n\t"designTimeRights": [\r\n\t\t{\r\n\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t"informationRight": true,\r\n\t\t\t"decisionRight": true\r\n\t\t}\r\n\t],\r\n\t"txnTimeRights": [\r\n\t\t{\r\n\t\t\t"rightHolderId": {{CCORoleId}},\r\n\t\t\t"name": "{{RoleCCO}}",\r\n\t\t\t"rightHolderType": "ROLE",\r\n\t\t\t"informationRight": true,\r\n\t\t\t"decisionRight": false,\r\n\t\t\t"executionRight": true\r\n\t\t}\r\n\t],\r\n\t"id": {{SolutionId2}},\r\n    "status": "DRAFT",\r\n    "version": "2.0",\r\n    "masterId": {{SolutionId1}}\r\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
        pm.expect(pm.response.json().result.version).to.eq("2.0");
      });

      pm.environment.set(
        "LayerId2",
        pm.response.json().result.solutionLogic[1].id
      );
    }
  });

  postman[Request]({
    name: "Save GSI",
    id: "60ffe3e1-7692-40e0-8dc5-452fd0bca730",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/GSI",
    data:
      '{\n    "name": "{{SolutionName}}",\n    "displayName": "{{SolutionName}}",\n    "cuType": "GSI",\n    "agents": [\n        {\n            "agentType": "human"\n        }\n    ],\n    "subOrdinateCUList": [],\n    "superOrdinateCUList": [],\n    "layers": null,\n    "solutionLogic": [\n        {\n            "index": 1,\n            "nextTriggerSet": [\n                {\n                    "index": 2,\n                    "nextCUName": "{{CuName2}}"\n                }\n            ],\n            "referencedChangeUnit": {{CuId1}},\n            "dcd": [],\n            "exceptionCUList": [],\n            "eventCUList": [],\n            "mindCUList": [],\n            "entityDesignRights": {},\n            "entityTransactionRights": {},\n            "attributeDesignRights": {},\n            "attributeTransactionRights": {},\n            "cuType": "BASIC",\n            "specialFeatureProperties": {},\n            "slotItemData": {},\n            "name": "{{CuName1}}",\n            "displayName": "{{CuName1}}",\n            "description": "Change Unit Description",\n            "agents": [\n                {\n                    "agentType": "human"\n                }\n            ],\n            "superOrdinateCUList": [],\n            "membershipList": [],\n            "status": "DRAFT",\n            "propertiesMap": {\n                "defaultValues": [],\n                "specialFeatures": []\n            },\n            "cuSystemProperties": {},\n            "id": {{LayerId21}},\n            "designTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": true,\n                    "executionRight": false,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "txnTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": false,\n                    "executionRight": true,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "visited": true\n        },\n        {\n            "index": 2,\n            "nextTriggerSet": [],\n            "referencedChangeUnit": {{CuId2}},\n            "dcd": [],\n            "exceptionCUList": [],\n            "eventCUList": [],\n            "mindCUList": [],\n            "entityDesignRights": {},\n            "entityTransactionRights": {},\n            "attributeDesignRights": {},\n            "attributeTransactionRights": {},\n            "cuType": "BASIC",\n            "specialFeatureProperties": {},\n            "slotItemData": {},\n            "name": "{{CuName2}}",\n            "displayName": "{{CuName2}}",\n            "agents": [\n                {}\n            ],\n            "superOrdinateCUList": [],\n            "membershipList": [],\n            "status": "DRAFT",\n            "propertiesMap": {},\n            "cuSystemProperties": {},\n            "id": {{LayerId2}},\n            "designTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": true,\n                    "executionRight": false,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "txnTimeRights": [\n                {\n                    "informationRight": true,\n                    "decisionRight": false,\n                    "executionRight": true,\n                    "rightHolderId": {{CCORoleId}},\n                    "rightHolderType": "ROLE",\n                    "rightHolderName": "{{RoleCCO}}",\n                    "disableParentRoleAccess": false\n                }\n            ],\n            "draftedCu": false\n        }\n    ],\n    "designTimeRights": [\n        {\n            "informationRight": true,\n            "decisionRight": true,\n            "executionRight": false,\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderType": "ROLE",\n            "rightHolderName": "{{RoleCCO}}",\n            "disableParentRoleAccess": false,\n            "name": "{{RoleCCO}}"\n        }\n    ],\n    "txnTimeRights": [\n        {\n            "informationRight": true,\n            "decisionRight": false,\n            "executionRight": true,\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderType": "ROLE",\n            "rightHolderName": "{{RoleCCO}}",\n            "disableParentRoleAccess": false,\n            "name": "{{RoleCCO}}"\n        }\n    ],\n    "id": {{SolutionId2}},\n    "status": "DRAFT",\n    "version": "2.0",\n    "masterId": {{SolutionId1}}\n}',
    headers: {
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
        pm.expect(pm.response.json().result.version).to.eq("2.0");
      });
    }
  });

  postman[Request]({
    name: "Finish GSI (2.0)",
    id: "79fa42f2-71e1-45fa-a44d-127b1fcc2a00",
    method: "POST",
    address:
      "https://{{TenantName}}.{{BaseURL}}/solution-versioning/api/version/finish",
    data:
      '{\n    "constrainedToReportingTree": false,\n    "constrainedToTeam": false,\n    "rights": [\n        "EXECUTION_RIGHTS",\n        "SOLUTIONS_DECISION_RIGHTS",\n        "TXN_INFO_RIGHTS"\n    ],\n    "nextTriggerSet": [],\n    "dcd": [],\n    "exceptionCUList": [],\n    "eventCUList": [],\n    "mindCUList": [],\n    "entityDesignRights": {},\n    "entityTransactionRights": {},\n    "attributeDesignRights": {},\n    "attributeTransactionRights": {},\n    "cuType": "BASIC",\n    "specialFeatureProperties": {},\n    "slotItemData": {},\n    "name": "{{SolutionName}}",\n    "displayName": "{{SolutionName}}",\n    "agents": [\n        {\n            "agentType": "human"\n        }\n    ],\n    "superOrdinateCUList": [],\n    "membershipList": [],\n    "isReserved": false,\n    "masterId": {{SolutionId1}},\n    "version": "2.0",\n    "status": "DRAFT",\n    "propertiesMap": {},\n    "cuSystemProperties": {},\n    "id": {{SolutionId2}},\n    "designTimeRights": [\n        {\n            "informationRight": true,\n            "decisionRight": true,\n            "executionRight": false,\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderType": "ROLE",\n            "rightHolderName": "{{RoleCCO}}",\n            "disableParentRoleAccess": false\n        }\n    ],\n    "txnTimeRights": [\n        {\n            "informationRight": true,\n            "decisionRight": false,\n            "executionRight": true,\n            "rightHolderId": {{CCORoleId}},\n            "rightHolderType": "ROLE",\n            "rightHolderName": "{{RoleCCO}}",\n            "disableParentRoleAccess": false\n        }\n    ]\n}',
    headers: {
      "accept-language": "en",
      accept: "application/json, text/plain, */*",
      authorization: "{{BearerToken}}",
      "content-type": "application/json"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "GSI " +
            pm.environment.get("SolutionName") +
            " GSI Unit Id :" +
            pm.environment.get("SolutionId2") +
            " is successfully finished"
        );
        pm.expect(pm.response.json().result.status).to.eq("READY");
        pm.expect(pm.response.json().result.version).to.eq("2.0");
      });
    }
  });

  postman[Request]({
    name: "Diff GSI v1.0 vs v2.0",
    id: "b558de02-3dc9-4760-b44b-764a8ad80232",
    method: "GET",
    address:
      "https://{{TenantName}}.{{BaseURL}}/solution-versioning/api/diff/GSI?draftId={{SolutionId2}}",
    headers: {
      accept: "application/json, text/plain, */*",
      authorization: "{{BearerToken}}",
      "accept-language": "en"
    },
    post(response) {
      pm.test("Check status code", function () {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json()).to.include(
          '{"status":"ADDED","oldValue":null,"newValue":"' +
            pm.environment.get("CuName2") +
            '"}'
        );
      });
    }
  });
}
