// Auto-generated by the postman-to-k6 converter

import "./libs/shim/core.js";
import "./libs/shim/expect.js";
import "./libs/shim/urijs.js";

export let options = { maxRedirects: 4 };

const Request = Symbol.for("request");
postman[Symbol.for("initial")]({
  options,
  environment: {
    BaseURL: "qa3.nslhub.com",
    IamURL: "https://qaiam.nslhub.com",
    SuperAdminTenant: "Super-Admin",
    TenantName: "apiqa0504",
    TenantAdmin: "admin@nslhub.com",
    AdminPassword: "admin",
    CCORoleId: 1841833683818,
    RoleCCO: "CCO",
    UserCCOManager: "userccomanager",
    UserCCO: "usercco",
    UserCCOId: 322589991331,
    UserCCO1: "usercco1",
    UserCCO1Id: 1972120016659,
    CCHRoleId: 234529237640,
    RoleCCH: "CCH",
    UserCCH: "usercch",
    RoleCCA: "CCA",
    UserCCA: "usercca",
    Password: "test",
    BearerToken: "undefined undefined",
    TenantName2: "apiqaei0504",
    TenantAdmin2: "admin@nslhub.com",
    AdminPassword2: "admin",
    DsdFileStoreURL: "https://ava-nlg-dev.nslhub.com",
    RefreshToken: null,
    WaitTime: 30000,
    NUMBER: "",
    COUNT: "",
    UserCCOEmailId: "usercco@nslhub.com",
    UserCCO1EmailId: "usercco1@nslhub.com",
    UserCCOManagerEmailId: "userccomanager@nslhub.com",
    UserCCAId: 2044956951239,
    UserCCA1Id: 2043386291967,
    UserCCA1: "usercca1",
    CCARoleId: 368848764661,
    UserCCOManagerId: 2119243203126,
    UserCCH1: "usercch1",
    OuCCO: "oucco",
    OuCCOId: "191876919025",
    UserOuCCO: "useroucco",
    UserOuCCO1: "useroucco1",
    UserOuCCOId: 1657502426387,
    UserOuCCOId1: 668079088379,
    GN: "",
    SolutionPublisher: "SolutionPublisher",
    SolutionPublisherId: 824925532392,
    TenantNameStage: "apiqa0504stage",
    TenantNameProd: "apiqa0504prod",
    TenantNameStageClientId: "apiqa0504_staging",
    UserCCHId: 398151345508,
    TraceAuditRole: "auditdata",
    TraceAuditRoleId: 1873250222640,
    AuditDesigner: "auditdesigner",
    AuditDesignerId: 1139785560613,
    AuditReviewer: "auditreviewer",
    AuditReviewerId: 996441711937,
    AuditDesignerEmailId: "auditdesigner@nslhub.com",
    SuperAdminUserName: "platformadmin@nslhub.com",
    SuperAdminPassword: "padmin@123",
    SaasTenantName: "apiqasaas0802",
    SaasUserCCO: "usercco",
    SaasUserCCOId: "1173118793932",
    SaasTenantId: 28606,
    SuperAdminUserId: "-827185515",
    SuperAdminUser: "platformadmin",
    SaasRoleCCO: "CCO",
    SaasTenantAdmin: "admin@nslhub.com",
    SaasUserCCH: "usercch",
    SaasUserCCHId: "933373429905",
    SaasRoleCCH: "CCH",
    SaasUserCCA: "usercca",
    SaasUserCCAId: "1588750292491",
    SaasRoleCCA: "CCA",
    RoleManager: "Manager",
    ManagerRoleId: 829265664407,
    RoleEmployee: "Employee",
    EmployeeRoleId: 2040409113899,
    RoleFinance: "Finance",
    FinanceRoleId: 1764637492961,
    TenantAdminId: 894878720178,
    Tenant2AdminId: 1597011094011,
    T2UserCCOId: 1386113498793,
    T2CCORoleId: 239407227356,
    EmployeeUser: "employeeuser",
    EmployeeUserId: 1917645633263,
    FinanceUser: "financeuser",
    FinanceUserId: 820077520635,
    FinanceUser1: "financeuser1",
    FinanceUserId1: "1192769182955",
    EmployeeUser1: "employeeuser1",
    EmployeeUserId1: "1228497924811",
    ManagerUser: "manageruser",
    ManagerUserId: 1732001198107,
    ManagerUser1: "manageruser1",
    ManagerUserId1: "897141596215",
    UserCCHEmailId: "usercch@nslhub.com",
    UserCCAEmailId: "usercca@nslhub.com",
    UserCCA1EmailId: "usercca1@nslhub.com",
    UserCCH1EmailId: "usercch1@nslhub.com",
    UserCCH1Id: 632745185759,
    SAASAdminUserId: "242233047416",
    SaasUserCCO1Id: "464692553728",
    SaasUserCCOManagerId: "202094916017",
    ManagerUser1Id: 1989195344420,
    FinanceUser1Id: 1829479253660,
    EmployeeUser1Id: 1178159858335,
    T2UserCCO1Id: 878542497800,
    StageAdmin: "stageadmin@nslhub.com",
    UserCCC: "userccc",
    UserCCC1: "userccc1",
    UserCCCManager: "usercccmanager",
    RoleSolutionCustomizer: "SolutionCustomizer",
    UserCCCId: "668849564311",
    UserCCC1Id: "1607519294012",
    SolutionCustomizerRoleId: "639989182448",
    T3UserCCO1Id: 405650278408,
    Tenant3AdminId: 982435399574,
    T3UserCCOId: 1424682699760,
    T3CCORoleId: 129071126100,
    TenantName3: "apiqa3ten0604",
    REVIEW_WAITTIME: "5000"
  }
});

export default function() {
  postman[Request]({
    name: "Generate Token (usercco)",
    id: "fdeeaff6-f72a-4ac8-88ef-dd7236f223e6",
    method: "POST",
    address:
      "{{IamURL}}/auth/realms/{{TenantName}}/protocol/openid-connect/token",
    data: {
      username: "{{UserCCO}}",
      password: "{{Password}}",
      grant_type: "password",
      client_id: "{{TenantName}}"
    },
    headers: {
      Accept: "application/json, text/plain, */*",
      "Accept-Language": "en",
      "Content-Type": "application/x-www-form-urlencoded"
    },
    pre() {
      pm.variables.clear();

      pm.variables.set(
        "RandomNumber",
        new Date()
          .toISOString()
          .replace(/[^0-9]/g, "")
          .slice(0, -3) +
          "" +
          Math.floor(Math.random() * 100000 + 1)
      );

      pm.variables.set(
        "CuName1",
        "User Details" + pm.variables.get("RandomNumber")
      );
      pm.variables.set(
        "EntityName1",
        "user" + pm.variables.get("RandomNumber")
      );
      pm.variables.set("AttributeName11", "Full Name");
      pm.variables.set("AttributeName12", "User ID");
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
      });

      pm.environment.set(
        "BearerToken",
        pm.response.json().token_type + " " + pm.response.json().access_token
      );
      pm.environment.set("RefreshToken", pm.response.json().refresh_token);
    }
  });

  postman[Request]({
    name: "Create an entity",
    id: "8cdce63b-7454-4c9a-a9ac-876f836c4496",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/Entity",
    data:
      '{\n\t"nslAttributes": [\n\t\t{\n\t\t\t"name": "{{AttributeName11}}",\n\t\t\t"isReserved": false,\n\t\t\t"constraints": [],\n\t\t\t"attributeClassification": "ESSENTIAL",\n\t\t\t"attributeType": {\n\t\t\t\t"type": "string",\n\t\t\t\t"properties": {\n\t\t\t\t\t"sourceValues": "[]"\n\t\t\t\t},\n\t\t\t\t"uiElement": "text"\n\t\t\t},\n\t\t\t"id": null\n\t\t},\n\t\t{\n\t\t\t"defaultValue": null,\n\t\t\t"name": "{{AttributeName12}}",\n\t\t\t"isReserved": false,\n\t\t\t"constraints": [],\n\t\t\t"attributeClassification": "ESSENTIAL",\n\t\t\t"attributeType": {\n\t\t\t\t"type": "number",\n\t\t\t\t"properties": {\n\t\t\t\t\t"sourceValues": "[]"\n\t\t\t\t},\n\t\t\t\t"uiElement": "number"\n\t\t\t},\n\t\t\t"id": null\n\t\t}\n\t],\n\t"entityClassification": "",\n\t"name": "{{EntityName1}}",\n\t"isMultiValue": false\n}',
    headers: {
      Accept: "application/json, text/plain, */*",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      "Accept-Language": "en"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          pm.variables.get("EntityName1") + " is successfully saved"
        );
      });

      pm.variables.set("EntityId1", pm.response.json().result.id);
      pm.variables.set("EntityMasterId", pm.response.json().result.id);
      pm.variables.set(
        "AttributeId11",
        pm.response.json().result.nslAttributes[0].id
      );
      pm.variables.set(
        "AttributeId12",
        pm.response.json().result.nslAttributes[1].id
      );
      pm.variables.set("EntityGuid1", pm.response.json().result.guid);
    }
  });

  postman[Request]({
    name: "Add attributes to the entity",
    id: "fedff3d7-638e-4bef-bdf2-573b9256c943",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/core/UIAttribute",
    data:
      '{\n\t"cuId": null,\n\t"cuType": null,\n\t"tuples": [],\n\t"entityList": [\n\t\t{\n\t\t\t"entityId": {{EntityId1}},\n\t\t\t"tuples": [],\n\t\t\t"attributeList": [\n\t\t\t\t{\n\t\t\t\t\t"attributeId": {{AttributeId11}},\n\t\t\t\t\t"tuples": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"key": "uiControl",\n\t\t\t\t\t\t\t"value": "text"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"attributeId": {{AttributeId12}},\n\t\t\t\t\t"tuples": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"key": "uiControl",\n\t\t\t\t\t\t\t"value": "number"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n}',
    headers: {
      "Accept-Language": "en",
      Authorization: "{{BearerToken}}",
      "Content-Type": "application/json",
      Accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "Successfully saved the UIAttribute "
        );
      });
    }
  });

  postman[Request]({
    name: "Save CU",
    id: "df449d71-877d-413e-9424-74c8140b5855",
    method: "POST",
    address: "https://{{TenantName}}.{{BaseURL}}/dsd-orch/core/CU",
    data:
      '{\n\t"name": "{{CuName1}}",\n\t"agents": [\n\t\t{\n\t\t\t"agentType": "human"\n\t\t}\n\t],\n\t"cuType": "BASIC",\n\t"layers": [\n\t\t{\n\t\t\t"type": "physical",\n\t\t\t"label": "physical",\n\t\t\t"participatingItems": [\n\t\t\t\t{\n\t\t\t\t\t"item": {\n\t\t\t\t\t\t"TYPE": "GeneralEntity",\n\t\t\t\t\t\t"DATA": {\n\t\t\t\t\t\t\t"name": "{{EntityName1}}",\n\t\t\t\t\t\t\t"nslAttributes": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t"name": "{{AttributeName11}}",\n\t\t\t\t\t\t\t\t\t"attributeType": {\n\t\t\t\t\t\t\t\t\t\t"type": "string",\n\t\t\t\t\t\t\t\t\t\t"nestedNslDataTypeProperties": {},\n\t\t\t\t\t\t\t\t\t\t"properties": {\n\t\t\t\t\t\t\t\t\t\t\t"sourceValues": "[]"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t"constraints": [],\n\t\t\t\t\t\t\t\t\t"attributeClassification": "ESSENTIAL",\n\t\t\t\t\t\t\t\t\t"isReserved": false,\n\t\t\t\t\t\t\t\t\t"id": {{AttributeId11}},\n\t\t\t\t\t\t\t\t\t"uiElement": {\n\t\t\t\t\t\t\t\t\t\t"dataType": "string",\n\t\t\t\t\t\t\t\t\t\t"name": "Text",\n\t\t\t\t\t\t\t\t\t\t"uiElement": "text",\n\t\t\t\t\t\t\t\t\t\t"isMulti": false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t"name": "{{AttributeName12}}",\n\t\t\t\t\t\t\t\t\t"attributeType": {\n\t\t\t\t\t\t\t\t\t\t"type": "number",\n\t\t\t\t\t\t\t\t\t\t"nestedNslDataTypeProperties": {},\n\t\t\t\t\t\t\t\t\t\t"properties": {\n\t\t\t\t\t\t\t\t\t\t\t"sourceValues": "[]"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t"constraints": [],\n\t\t\t\t\t\t\t\t\t"attributeClassification": "ESSENTIAL",\n\t\t\t\t\t\t\t\t\t"isReserved": false,\n\t\t\t\t\t\t\t\t\t"id": {{AttributeId12}},\n\t\t\t\t\t\t\t\t\t"uiElement": {\n\t\t\t\t\t\t\t\t\t\t"dataType": "number",\n\t\t\t\t\t\t\t\t\t\t"name": "Number",\n\t\t\t\t\t\t\t\t\t\t"uiElement": "number",\n\t\t\t\t\t\t\t\t\t\t"isMulti": false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t"isReserved": false,\n\t\t\t\t\t\t\t"id": {{EntityId1}}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t"designTimeRights": [\n\t\t{\n\t\t\t"rightHolderId": {{CCORoleId}},\n\t\t\t"name": "{{RoleCCO}}",\n\t\t\t"rightHolderType": "ROLE",\n\t\t\t"informationRight": true,\n\t\t\t"decisionRight": true\n\t\t}\n\t],\n\t"txnTimeRights": [\n\t\t{\n\t\t\t"rightHolderId": {{CCORoleId}},\n\t\t\t"name": "{{RoleCCO}}",\n\t\t\t"rightHolderType": "ROLE",\n\t\t\t"informationRight": true,\n\t\t\t"decisionRight": false,\n\t\t\t"executionRight": true\n\t\t}\n\t],\n\t"id": null,\n\t"draftedCu": false,\n\t"nextTriggerSet": [],\n\t"dcd": [],\n\t"mindCUList": [],\n\t"exceptionCUList": [],\n\t"isAlternate": false,\n\t"index": 1,\n\t"activeCuIndex": true,\n\t"entitySaved": true,\n\t"createdEntityId": {{EntityId1}},\n\t"displayName": "{{CuName1}}",\n\t"description": "Change Unit Description"\n}',
    headers: {
      authority: "{{TenantName}}.{{BaseURL}}",
      "accept-language": "en",
      "sec-ch-ua-mobile": "?0",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*",
      origin: "https://{{TenantName}}.{{BaseURL}}",
      "sec-fetch-site": "same-origin",
      "sec-fetch-mode": "cors",
      "sec-fetch-dest": "empty"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "CU has been saved successfully"
        );
        pm.expect(pm.response.json().result.status).to.eq("DRAFT");
        pm.expect(pm.response.json().result.id).not.eq(undefined);
      });

      pm.variables.set("CuMasterId", pm.response.json().result.id);
      pm.variables.set("CuId1", pm.response.json().result.id);
      pm.variables.set(
        "ItemId1",
        pm.response.json().result.layers[0].participatingItems[0].id
      );
      pm.variables.set(
        "ParticipatingItemId1",
        pm.response.json().result.layers[0].id
      );
    }
  });

  postman[Request]({
    name: "Send notofication for approval",
    id: "43d543e6-c694-4d63-ba40-2037ca529419",
    method: "POST",
    address:
      "https://{{TenantName}}.{{BaseURL}}/dsd-orch/v1/notifications/api/notification/send",
    data:
      '{\n    "actionableContent": {\n        "target_type": "Cu",\n        "target_id": {{CuId1}},\n        "target_name": "{{CuName1}}",\n        "context_cu": "",\n        "context_gsi": "",\n        "approvals": "true"\n    },\n    "title": "Review cu",\n    "targetUserId": [\n        "{{UserCCO1}}@nslhub.com"\n    ],\n    "notificationChannels": [\n        "PUSH"\n    ],\n    "content": ""\n}',
    headers: {
      authority: "{{TenantName}}.{{BaseURL}}",
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*",
      origin: "https://{{TenantName}}.{{BaseURL}}",
      "sec-fetch-site": "same-origin",
      "sec-fetch-mode": "cors",
      "sec-fetch-dest": "empty"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
        pm.expect(pm.response.json().message).to.eq(
          "Notification sent successfully"
        );
      });
    }
  });

  postman[Request]({
    name: "Approve CU",
    id: "182c176a-eac1-44d8-9668-1927cfcf2913",
    method: "POST",
    address:
      "https://{{TenantName}}.{{BaseURL}}/solution-versioning/api/cu/version/approve/{{CuId1}}",
    data: '{"changeUnitId":{{CuId1}}}',
    headers: {
      "accept-language": "en",
      authorization: "{{BearerToken}}",
      "content-type": "application/json",
      accept: "application/json, text/plain, */*"
    },
    post(response) {
      pm.test("Check status code", function() {
        pm.expect(pm.response.code).to.eq(200);
      });

      setTimeout(() => {}, pm.environment.get("WaitTime"));
    }
  });
}
